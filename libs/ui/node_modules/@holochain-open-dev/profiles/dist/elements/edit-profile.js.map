{"version":3,"file":"edit-profile.js","sourceRoot":"","sources":["../../src/elements/edit-profile.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { localized, msg, str } from '@lit/localize';\nimport { consume } from '@lit-labs/context';\nimport { onSubmit, sharedStyles } from '@holochain-open-dev/elements';\n\nimport '@shoelace-style/shoelace/dist/components/avatar/avatar.js';\nimport '@shoelace-style/shoelace/dist/components/button/button.js';\nimport '@shoelace-style/shoelace/dist/components/input/input.js';\nimport '@shoelace-style/shoelace/dist/components/icon/icon.js';\nimport '@holochain-open-dev/elements/dist/elements/select-avatar.js';\n\nimport { ProfilesStore } from '../profiles-store.js';\nimport { profilesStoreContext } from '../context.js';\nimport { Profile } from '../types.js';\nimport { FieldConfig } from '../config.js';\n\n/**\n * @element edit-profile\n * @fires save-profile - Fired when the save profile button is clicked\n */\n@localized()\n@customElement('edit-profile')\nexport class EditProfile extends LitElement {\n  /**\n   * The profile to be edited.\n   */\n  @property({ type: Object })\n  profile: Profile | undefined;\n\n  /**\n   * Label for the save profile button.\n   */\n  @property({ type: String, attribute: 'save-profile-label' })\n  saveProfileLabel: string | undefined;\n\n  /**\n   * Profiles store for this element, not required if you embed this element inside a <profiles-context>\n   */\n  @consume({ context: profilesStoreContext, subscribe: true })\n  @property()\n  store!: ProfilesStore;\n\n  @property({ type: Boolean, attribute: 'allow-cancel' })\n  allowCancel = false;\n\n  /** Private properties */\n\n  avatarMode() {\n    return (\n      this.store.config.avatarMode === 'avatar-required' ||\n      this.store.config.avatarMode === 'avatar-optional'\n    );\n  }\n\n  fireSaveProfile(fields: Record<string, string>) {\n    const nickname = fields['nickname'];\n    delete fields['nickname'];\n\n    const profile: Profile = {\n      fields,\n      nickname,\n    };\n\n    this.dispatchEvent(\n      new CustomEvent('save-profile', {\n        detail: {\n          profile,\n        },\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  fireCancel() {\n    this.dispatchEvent(\n      new CustomEvent('cancel-edit-profile', {\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  renderField(fieldConfig: FieldConfig) {\n    return html`\n      <sl-input\n        name=\"${fieldConfig.name}\"\n        .required=${fieldConfig.required}\n        .label=${fieldConfig.label}\n        .value=${this.profile?.fields[fieldConfig.name] || ''}\n        style=\"margin-bottom: 16px;\"\n      ></sl-input>\n    `;\n  }\n\n  render() {\n    return html`\n      <form\n        id=\"profile-form\"\n        class=\"column\"\n        ${onSubmit(fields => this.fireSaveProfile(fields))}\n      >\n        <div\n          class=\"row\"\n          style=\"justify-content: center; align-self: start; margin-bottom: 16px\"\n        >\n          ${this.avatarMode()\n            ? html` <select-avatar\n                name=\"avatar\"\n                .value=${this.profile?.fields['avatar'] || undefined}\n                .required=${this.store.config.avatarMode === 'avatar-required'}\n              ></select-avatar>`\n            : html``}\n\n          <sl-input\n            name=\"nickname\"\n            .label=${msg('Nickname')}\n            required\n            minLength=\"${this.store.config.minNicknameLength}\"\n            .value=${this.profile?.nickname || ''}\n            .helpText=${msg(\n              str`Min. ${this.store.config.minNicknameLength} characters`\n            )}\n            style=\"margin-left: 16px;\"\n          ></sl-input>\n        </div>\n\n        ${this.store.config.additionalFields.map(field =>\n          this.renderField(field)\n        )}\n\n        <div class=\"row\" style=\"margin-top: 8px;\">\n          ${this.allowCancel\n            ? html`\n                <sl-button\n                  style=\"flex: 1; margin-right: 6px;\"\n                  @click=${() => this.fireCancel()}\n                >\n                  ${msg('Cancel')}\n                </sl-button>\n              `\n            : html``}\n\n          <sl-button style=\"flex: 1;\" variant=\"primary\" type=\"submit\"\n            >${this.saveProfileLabel ?? msg('Save Profile')}\n          </sl-button>\n        </div>\n      </form>\n    `;\n  }\n\n  static styles = [sharedStyles];\n}\n"]}