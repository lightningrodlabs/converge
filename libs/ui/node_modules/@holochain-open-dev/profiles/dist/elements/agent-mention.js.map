{"version":3,"file":"agent-mention.js","sourceRoot":"","sources":["../../src/elements/agent-mention.ts"],"names":[],"mappings":"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","sourcesContent":["import { consume } from \"@lit-labs/context\";\nimport { hashProperty, sharedStyles } from \"@holochain-open-dev/elements\";\nimport { css, html, LitElement } from \"lit\";\nimport { state, property, customElement } from \"lit/decorators.js\";\nimport { styleMap } from \"lit-html/directives/style-map.js\";\nimport { AgentPubKey, encodeHashToBase64 } from \"@holochain/client\";\nimport { localized, msg } from \"@lit/localize\";\nimport { StoreSubscriber } from \"@holochain-open-dev/stores\";\n\nimport \"@holochain-open-dev/elements/dist/elements/display-error.js\";\nimport \"@holochain-open-dev/elements/dist/elements/holo-identicon.js\";\nimport \"@shoelace-style/shoelace/dist/components/avatar/avatar.js\";\nimport \"@shoelace-style/shoelace/dist/components/tag/tag.js\";\nimport \"@shoelace-style/shoelace/dist/components/skeleton/skeleton.js\";\nimport \"@shoelace-style/shoelace/dist/components/tooltip/tooltip.js\";\n\nimport { profilesStoreContext } from \"../context.js\";\nimport { ProfilesStore } from \"../profiles-store.js\";\nimport { Profile } from \"../types.js\";\n\n@localized()\n@customElement(\"agent-mention\")\nexport class AgentMention extends LitElement {\n  /** Public properties */\n\n  /**\n   * REQUIRED. The public key identifying the agent whose profile is going to be shown.\n   */\n  @property(hashProperty(\"agent-pub-key\"))\n  agentPubKey!: AgentPubKey;\n\n  /**\n   * Size of the avatar image in pixels.\n   */\n  @property({ type: Number })\n  size = 24;\n\n  /** Dependencies */\n\n  /**\n   * Profiles store for this element, not required if you embed this element inside a <profiles-context>\n   */\n  @consume({ context: profilesStoreContext, subscribe: true })\n  @property()\n  store!: ProfilesStore;\n\n  /**\n   * @internal\n   */\n  private _agentProfile = new StoreSubscriber(\n    this,\n    () => this.store.profiles.get(this.agentPubKey),\n    () => [this.agentPubKey]\n  );\n\n  renderAvatar(profile: Profile | undefined) {\n    if (!profile || !profile.fields.avatar) {\n      return html` <div\n        style=${styleMap({\n          position: \"relative\",\n          height: `${this.size}px`,\n          width: `${this.size}px`,\n        })}\n      >\n        <holo-identicon\n          .disableCopy=${true}\n          .disableTooltip=${true}\n          .hash=${this.agentPubKey}\n          .size=${this.size}\n        >\n        </holo-identicon>\n      </div>`;\n    }\n    return html`\n      <sl-avatar\n        .image=${profile.fields.avatar}\n        style=\"--size: ${this.size}px;\"\n      >\n      </sl-avatar>\n    `;\n  }\n\n  renderProfile(profile: Profile | undefined) {\n    return html`\n      <div class=\"row\">\n        ${this.renderAvatar(profile)}\n        <span style=\"margin-left: 8px\">${profile?.nickname}</span>\n      </div>\n    `;\n  }\n\n  renderContent() {\n    switch (this._agentProfile.value.status) {\n      case \"pending\":\n        return html`<sl-skeleton effect=\"pulse\"></sl-skeleton>`;\n      case \"complete\":\n        return this.renderProfile(this._agentProfile.value.value);\n      case \"error\":\n        return html`\n          <display-error\n            tooltip\n            .headline=${msg(\"Error fetching the agent's avatar\")}\n            .error=${this._agentProfile.value.error}\n          ></display-error>\n        `;\n    }\n  }\n\n  render() {\n    return html`\n      <sl-tag pill style=\"display: inline-flex\">${this.renderContent()}</sl-tag>\n    `;\n  }\n\n  static styles = [\n    sharedStyles,\n    css`\n      :host {\n        display: inline-flex;\n      }\n    `,\n  ];\n}\n"]}