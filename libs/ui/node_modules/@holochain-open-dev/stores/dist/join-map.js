import { HoloHashMap } from "@holochain-open-dev/utils";
import { derived } from "svelte/store";
import { asyncDerived, join } from "./async-derived.js";
// Joins all the stores in a HoloHashMap of `Readables`
export function joinMap(holoHashMap) {
    const storeArray = Array.from(holoHashMap.entries()).map(([key, store]) => derived([store], ([v]) => [key, v]));
    const arrayStore = derived(storeArray, (i) => i);
    return derived([arrayStore], ([entries]) => new HoloHashMap(entries));
}
// Joins all the stores in a HoloHashMap of `AsyncReadables`
export function joinAsyncMap(holoHashMap) {
    const storeArray = Array.from(holoHashMap.entries()).map(([key, store]) => asyncDerived(store, (v) => [key, v]));
    const arrayStore = join(storeArray);
    return asyncDerived(arrayStore, (entries) => new HoloHashMap(entries));
}
//# sourceMappingURL=join-map.js.map